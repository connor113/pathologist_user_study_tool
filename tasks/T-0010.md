# tasks/T-0010.md — Admin Session Replay Viewer (≤6 hours)

**Goal:** Add admin-only session replay feature: select pathologist + slide, visualize scanning path with animated viewport and click sequences.

**AC:**
- Admin dashboard gains "Session Replay" section with:
  - Dropdown to select pathologist (list from database)
  - Dropdown to select slide (list of completed sessions for that pathologist)
  - "Load Replay" button fetches events for that session from backend

- New page/modal displays OpenSeadragon viewer with slide + overlay showing:
  - Lines connecting sequential click positions (in chronological order)
  - Color gradient from blue (early) to red (late) showing temporal progression
  - Viewport rectangle showing current field of view at each event
  - Click markers (circles) at each clicked cell center
  - Current event info overlay: timestamp, zoom level, event type

- Playback controls:
  - Play/Pause button
  - Speed slider (0.5×, 1×, 2×, 5×)
  - Scrubber to jump to specific event
  - "Previous Event" / "Next Event" step buttons

- Replay animation behavior:
  - Animate viewport panning between events (smooth transitions)
  - Animate zoom transitions (when zoom_step events occur)
  - Pause briefly at each click (configurable duration)
  - Show cumulative path (all previous lines visible)

**Constraints:**
- Pathologist users cannot access replay feature (role check)
- Only shows completed sessions (has slide_next event)
- Replay loads all events for session into memory (acceptable for ~100-500 events per session)
- Uses existing OpenSeadragon instance, no new dependencies
- Canvas overlay for drawing lines/markers
- No video export in V2 (manual screen recording if needed)

**Test notes:**
- Test with 700+ event session
- Verify viewport zooms and pans match logged events
- Test playback speed changes
- Verify click markers appear at correct grid cell centers
- Test with multiple sessions from different pathologists

**Deliverables:**
- `src/admin/SessionReplay.ts` - Replay viewer logic and animation
- `src/admin/admin.css` - Updated styles for replay UI
- `backend/src/routes/admin.ts` - Add endpoint: `GET /api/admin/sessions/:sessionId/events`
- `index.html` - Add replay modal/section to admin dashboard
- Updated `src/admin/dashboard.ts` - Add replay section to dashboard

