# tasks/T-0008.md — Production Readiness (≤3 hours)

**Goal:** Add error handling, loading states, session resume capability, database seeding scripts, and end-to-end testing; ensure system ready for pathologist user study.

**AC:**
- Loading spinners displayed during API calls (login, slide load, event upload)
- Network error handling: failed API calls show user-friendly error messages; retry logic for event uploads (3 attempts with exponential backoff)
- Session resume: if pathologist refreshes page mid-slide, app resumes at same slide (not same zoom/position; V2 restarts slide)
- Logout confirmation: "Are you sure?" dialog before logout (prevents accidental logouts)
- Database seeding script creates: 1 admin account, 3-5 test pathologist accounts, 5-10 test slides with manifests
- Admin script to bulk create pathologist accounts from CSV: `scripts/create-users.js` (input: CSV with usernames, output: generated passwords)
- Environment-specific error messages: detailed errors in development (console), generic errors in production (UI)
- Rate limiting on auth endpoints: max 5 login attempts per minute per IP (prevent brute force)
- End-to-end test: pathologist completes 5 slides, admin views progress, downloads CSV with all events
- Documentation: user guide for pathologists (how to login, navigate, label, logout)

**Constraints:**
- Use `express-rate-limit` for rate limiting on backend
- Error messages in production: "Something went wrong. Please try again." (no stack traces)
- Retry logic only for event uploads (not for auth or slide loads)
- Session resume: check for incomplete session for current user+slide; if exists, use that session_id
- Loading states: disable buttons during submission to prevent double-clicks
- No email notifications or alerts (out of scope for V2)

**Test notes:**
- Test network failures: disconnect internet, perform action, reconnect, verify retry works
- Test session resume: load slide, refresh browser, verify resumed at same slide
- Test logout confirmation: click logout, cancel dialog, verify still logged in
- Run seeding script on production database: verify admin and pathologist accounts created
- End-to-end test on production: 2 pathologists complete 5 slides each, admin downloads CSV with 10 sessions
- Test rate limiting: make 10 login attempts in 1 minute, verify rate limit error after 5th attempt
- User guide test: give guide to colleague unfamiliar with system, observe if they can complete workflow

**Deliverables:**
- `src/viewer/main.ts` - Add loading states, error handling, retry logic, session resume
- `src/viewer/ErrorHandler.ts` - Centralized error handling utility
- `backend/src/middleware/rateLimiter.ts` - Rate limiting middleware
- `scripts/seed-database.js` - Updated with admin + pathologist account creation
- `scripts/create-users.js` - Bulk user creation from CSV
- `docs/USER_GUIDE.md` - Pathologist user guide (login, navigate, label, logout workflow)
- `docs/ADMIN_GUIDE.md` - Admin guide (monitoring progress, downloading CSV, creating users)
- Updated `backend/src/index.ts` - Add rate limiting to auth routes
- Updated `.env.example` files - Document all required environment variables
- End-to-end test script or checklist in `docs/E2E_TEST.md`


